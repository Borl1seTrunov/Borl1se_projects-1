{"ast":null,"code":"'use strict';\n\nvar http = require('http');\nvar https = require('https');\nvar url = require('url');\nvar util = require('util');\nvar stream = require('stream');\nvar zlib = require('zlib');\nvar aws2 = require('aws-sign2');\nvar aws4 = require('aws4');\nvar httpSignature = require('http-signature');\nvar mime = require('mime-types');\nvar caseless = require('caseless');\nvar ForeverAgent = require('forever-agent');\nvar FormData = require('form-data');\nvar extend = require('extend');\nvar isstream = require('isstream');\nvar isTypedArray = require('is-typedarray').strict;\nvar helpers = require('./lib/helpers');\nvar cookies = require('./lib/cookies');\nvar getProxyFromURI = require('./lib/getProxyFromURI');\nvar Querystring = require('./lib/querystring').Querystring;\nvar Har = require('./lib/har').Har;\nvar Auth = require('./lib/auth').Auth;\nvar hawk = require('./lib/hawk');\nvar Multipart = require('./lib/multipart').Multipart;\nvar Redirect = require('./lib/redirect').Redirect;\nvar Tunnel = require('./lib/tunnel').Tunnel;\nvar now = require('performance-now');\nvar Buffer = require('safe-buffer').Buffer;\nvar safeStringify = helpers.safeStringify;\nvar isReadStream = helpers.isReadStream;\nvar toBase64 = helpers.toBase64;\nvar defer = helpers.defer;\nvar copy = helpers.copy;\nvar version = helpers.version;\nvar globalCookieJar = cookies.jar();\nvar globalPool = {};\nfunction filterForNonReserved(reserved, options) {\n  // Filter out properties that are not reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {};\n  for (var i in options) {\n    var notReserved = reserved.indexOf(i) === -1;\n    if (notReserved) {\n      object[i] = options[i];\n    }\n  }\n  return object;\n}\nfunction filterOutReservedFunctions(reserved, options) {\n  // Filter out properties that are functions and are reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {};\n  for (var i in options) {\n    var isReserved = !(reserved.indexOf(i) === -1);\n    var isFunction = typeof options[i] === 'function';\n    if (!(isReserved && isFunction)) {\n      object[i] = options[i];\n    }\n  }\n  return object;\n}\n\n// Return a simpler request object to allow serialization\nfunction requestToJSON() {\n  var self = this;\n  return {\n    uri: self.uri,\n    method: self.method,\n    headers: self.headers\n  };\n}\n\n// Return a simpler response object to allow serialization\nfunction responseToJSON() {\n  var self = this;\n  return {\n    statusCode: self.statusCode,\n    body: self.body,\n    headers: self.headers,\n    request: requestToJSON.call(self.request)\n  };\n}\nfunction Request(options) {\n  // if given the method property in options, set property explicitMethod to true\n\n  // extend the Request instance with any non-reserved properties\n  // remove any reserved functions from the options object\n  // set Request instance to be readable and writable\n  // call init\n\n  var self = this;\n\n  // start with HAR, then override with additional options\n  if (options.har) {\n    self._har = new Har(self);\n    options = self._har.options(options);\n  }\n  stream.Stream.call(self);\n  var reserved = Object.keys(Request.prototype);\n  var nonReserved = filterForNonReserved(reserved, options);\n  extend(self, nonReserved);\n  options = filterOutReservedFunctions(reserved, options);\n  self.readable = true;\n  self.writable = true;\n  if (options.method) {\n    self.explicitMethod = true;\n  }\n  self._qs = new Querystring(self);\n  self._auth = new Auth(self);\n  self._multipart = new Multipart(self);\n  self._redirect = new Redirect(self);\n  self._tunnel = new Tunnel(self);\n  self.init(options);\n}\nutil.inherits(Request, stream.Stream);\n\n// Debugging\nRequest.debug = process.env.NODE_DEBUG && /\\brequest\\b/.test(process.env.NODE_DEBUG);\nfunction debug() {\n  if (Request.debug) {\n    console.error('REQUEST %s', util.format.apply(util, arguments));\n  }\n}\nRequest.prototype.debug = debug;\nRequest.prototype.init = function (options) {\n  // init() contains all the code to setup the request object.\n  // the actual outgoing request is not started until start() is called\n  // this function is called from both the constructor and on redirect.\n  var self = this;\n  if (!options) {\n    options = {};\n  }\n  self.headers = self.headers ? copy(self.headers) : {};\n\n  // Delete headers with value undefined since they break\n  // ClientRequest.OutgoingMessage.setHeader in node 0.12\n  for (var headerName in self.headers) {\n    if (typeof self.headers[headerName] === 'undefined') {\n      delete self.headers[headerName];\n    }\n  }\n  caseless.httpify(self, self.headers);\n  if (!self.method) {\n    self.method = options.method || 'GET';\n  }\n  if (!self.localAddress) {\n    self.localAddress = options.localAddress;\n  }\n  self._qs.init(options);\n  debug(options);\n  if (!self.pool && self.pool !== false) {\n    self.pool = globalPool;\n  }\n  self.dests = self.dests || [];\n  self.__isRequestRequest = true;\n\n  // Protect against double callback\n  if (!self._callback && self.callback) {\n    self._callback = self.callback;\n    self.callback = function () {\n      if (self._callbackCalled) {\n        return; // Print a warning maybe?\n      }\n      self._callbackCalled = true;\n      self._callback.apply(self, arguments);\n    };\n    self.on('error', self.callback.bind());\n    self.on('complete', self.callback.bind(self, null));\n  }\n\n  // People use this property instead all the time, so support it\n  if (!self.uri && self.url) {\n    self.uri = self.url;\n    delete self.url;\n  }\n\n  // If there's a baseUrl, then use it as the base URL (i.e. uri must be\n  // specified as a relative path and is appended to baseUrl).\n  if (self.baseUrl) {\n    if (typeof self.baseUrl !== 'string') {\n      return self.emit('error', new Error('options.baseUrl must be a string'));\n    }\n    if (typeof self.uri !== 'string') {\n      return self.emit('error', new Error('options.uri must be a string when using options.baseUrl'));\n    }\n    if (self.uri.indexOf('//') === 0 || self.uri.indexOf('://') !== -1) {\n      return self.emit('error', new Error('options.uri must be a path when using options.baseUrl'));\n    }\n\n    // Handle all cases to make sure that there's only one slash between\n    // baseUrl and uri.\n    var baseUrlEndsWithSlash = self.baseUrl.lastIndexOf('/') === self.baseUrl.length - 1;\n    var uriStartsWithSlash = self.uri.indexOf('/') === 0;\n    if (baseUrlEndsWithSlash && uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri.slice(1);\n    } else if (baseUrlEndsWithSlash || uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri;\n    } else if (self.uri === '') {\n      self.uri = self.baseUrl;\n    } else {\n      self.uri = self.baseUrl + '/' + self.uri;\n    }\n    delete self.baseUrl;\n  }\n\n  // A URI is needed by this point, emit error if we haven't been able to get one\n  if (!self.uri) {\n    return self.emit('error', new Error('options.uri is a required argument'));\n  }\n\n  // If a string URI/URL was given, parse it into a URL object\n  if (typeof self.uri === 'string') {\n    self.uri = url.parse(self.uri);\n  }\n\n  // Some URL objects are not from a URL parsed string and need href added\n  if (!self.uri.href) {\n    self.uri.href = url.format(self.uri);\n  }\n\n  // DEPRECATED: Warning for users of the old Unix Sockets URL Scheme\n  if (self.uri.protocol === 'unix:') {\n    return self.emit('error', new Error('`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`'));\n  }\n\n  // Support Unix Sockets\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket();\n  }\n  if (self.strictSSL === false) {\n    self.rejectUnauthorized = false;\n  }\n  if (!self.uri.pathname) {\n    self.uri.pathname = '/';\n  }\n  if (!(self.uri.host || self.uri.hostname && self.uri.port) && !self.uri.isUnix) {\n    // Invalid URI: it may generate lot of bad errors, like 'TypeError: Cannot call method `indexOf` of undefined' in CookieJar\n    // Detect and reject it as soon as possible\n    var faultyUri = url.format(self.uri);\n    var message = 'Invalid URI \"' + faultyUri + '\"';\n    if (Object.keys(options).length === 0) {\n      // No option ? This can be the sign of a redirect\n      // As this is a case where the user cannot do anything (they didn't call request directly with this URL)\n      // they should be warned that it can be caused by a redirection (can save some hair)\n      message += '. This can be caused by a crappy redirection.';\n    }\n    // This error was fatal\n    self.abort();\n    return self.emit('error', new Error(message));\n  }\n  if (!self.hasOwnProperty('proxy')) {\n    self.proxy = getProxyFromURI(self.uri);\n  }\n  self.tunnel = self._tunnel.isEnabled();\n  if (self.proxy) {\n    self._tunnel.setup(options);\n  }\n  self._redirect.onRequest(options);\n  self.setHost = false;\n  if (!self.hasHeader('host')) {\n    var hostHeaderName = self.originalHostHeaderName || 'host';\n    self.setHeader(hostHeaderName, self.uri.host);\n    // Drop :port suffix from Host header if known protocol.\n    if (self.uri.port) {\n      if (self.uri.port === '80' && self.uri.protocol === 'http:' || self.uri.port === '443' && self.uri.protocol === 'https:') {\n        self.setHeader(hostHeaderName, self.uri.hostname);\n      }\n    }\n    self.setHost = true;\n  }\n  self.jar(self._jar || options.jar);\n  if (!self.uri.port) {\n    if (self.uri.protocol === 'http:') {\n      self.uri.port = 80;\n    } else if (self.uri.protocol === 'https:') {\n      self.uri.port = 443;\n    }\n  }\n  if (self.proxy && !self.tunnel) {\n    self.port = self.proxy.port;\n    self.host = self.proxy.hostname;\n  } else {\n    self.port = self.uri.port;\n    self.host = self.uri.hostname;\n  }\n  if (options.form) {\n    self.form(options.form);\n  }\n  if (options.formData) {\n    var formData = options.formData;\n    var requestForm = self.form();\n    var appendFormValue = function (key, value) {\n      if (value && value.hasOwnProperty('value') && value.hasOwnProperty('options')) {\n        requestForm.append(key, value.value, value.options);\n      } else {\n        requestForm.append(key, value);\n      }\n    };\n    for (var formKey in formData) {\n      if (formData.hasOwnProperty(formKey)) {\n        var formValue = formData[formKey];\n        if (formValue instanceof Array) {\n          for (var j = 0; j < formValue.length; j++) {\n            appendFormValue(formKey, formValue[j]);\n          }\n        } else {\n          appendFormValue(formKey, formValue);\n        }\n      }\n    }\n  }\n  if (options.qs) {\n    self.qs(options.qs);\n  }\n  if (self.uri.path) {\n    self.path = self.uri.path;\n  } else {\n    self.path = self.uri.pathname + (self.uri.search || '');\n  }\n  if (self.path.length === 0) {\n    self.path = '/';\n  }\n\n  // Auth must happen last in case signing is dependent on other headers\n  if (options.aws) {\n    self.aws(options.aws);\n  }\n  if (options.hawk) {\n    self.hawk(options.hawk);\n  }\n  if (options.httpSignature) {\n    self.httpSignature(options.httpSignature);\n  }\n  if (options.auth) {\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'username')) {\n      options.auth.user = options.auth.username;\n    }\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'password')) {\n      options.auth.pass = options.auth.password;\n    }\n    self.auth(options.auth.user, options.auth.pass, options.auth.sendImmediately, options.auth.bearer);\n  }\n  if (self.gzip && !self.hasHeader('accept-encoding')) {\n    self.setHeader('accept-encoding', 'gzip, deflate');\n  }\n  if (self.uri.auth && !self.hasHeader('authorization')) {\n    var uriAuthPieces = self.uri.auth.split(':').map(function (item) {\n      return self._qs.unescape(item);\n    });\n    self.auth(uriAuthPieces[0], uriAuthPieces.slice(1).join(':'), true);\n  }\n  if (!self.tunnel && self.proxy && self.proxy.auth && !self.hasHeader('proxy-authorization')) {\n    var proxyAuthPieces = self.proxy.auth.split(':').map(function (item) {\n      return self._qs.unescape(item);\n    });\n    var authHeader = 'Basic ' + toBase64(proxyAuthPieces.join(':'));\n    self.setHeader('proxy-authorization', authHeader);\n  }\n  if (self.proxy && !self.tunnel) {\n    self.path = self.uri.protocol + '//' + self.uri.host + self.path;\n  }\n  if (options.json) {\n    self.json(options.json);\n  }\n  if (options.multipart) {\n    self.multipart(options.multipart);\n  }\n  if (options.time) {\n    self.timing = true;\n\n    // NOTE: elapsedTime is deprecated in favor of .timings\n    self.elapsedTime = self.elapsedTime || 0;\n  }\n  function setContentLength() {\n    if (isTypedArray(self.body)) {\n      self.body = Buffer.from(self.body);\n    }\n    if (!self.hasHeader('content-length')) {\n      var length;\n      if (typeof self.body === 'string') {\n        length = Buffer.byteLength(self.body);\n      } else if (Array.isArray(self.body)) {\n        length = self.body.reduce(function (a, b) {\n          return a + b.length;\n        }, 0);\n      } else {\n        length = self.body.length;\n      }\n      if (length) {\n        self.setHeader('content-length', length);\n      } else {\n        self.emit('error', new Error('Argument error, options.body.'));\n      }\n    }\n  }\n  if (self.body && !isstream(self.body)) {\n    setContentLength();\n  }\n  var protocol = self.proxy && !self.tunnel ? self.proxy.protocol : self.uri.protocol;\n  var defaultModules = {\n    'http:': http,\n    'https:': https\n  };\n  var httpModules = self.httpModules || {};\n  self.httpModule = httpModules[protocol] || defaultModules[protocol];\n  if (!self.httpModule) {\n    return self.emit('error', new Error('Invalid protocol: ' + protocol));\n  }\n  if (options.ca) {\n    self.ca = options.ca;\n  }\n  if (!self.agent) {\n    if (options.agentOptions) {\n      self.agentOptions = options.agentOptions;\n    }\n    if (options.agentClass) {\n      self.agentClass = options.agentClass;\n    } else if (options.forever) {\n      var v = version();\n      // use ForeverAgent in node 0.10- only\n      if (v.major === 0 && v.minor <= 10) {\n        self.agentClass = protocol === 'http:' ? ForeverAgent : ForeverAgent.SSL;\n      } else {\n        self.agentClass = self.httpModule.Agent;\n        self.agentOptions = self.agentOptions || {};\n        self.agentOptions.keepAlive = true;\n      }\n    } else {\n      self.agentClass = self.httpModule.Agent;\n    }\n  }\n  if (self.pool === false) {\n    self.agent = false;\n  } else {\n    self.agent = self.agent || self.getNewAgent();\n  }\n  self.on('pipe', function (src) {\n    if (self.ntick && self._started) {\n      self.emit('error', new Error('You cannot pipe to this stream after the outbound request has started.'));\n    }\n    self.src = src;\n    if (isReadStream(src)) {\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', mime.lookup(src.path));\n      }\n    } else {\n      if (src.headers) {\n        for (var i in src.headers) {\n          if (!self.hasHeader(i)) {\n            self.setHeader(i, src.headers[i]);\n          }\n        }\n      }\n      if (self._json && !self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json');\n      }\n      if (src.method && !self.explicitMethod) {\n        self.method = src.method;\n      }\n    }\n\n    // self.on('pipe', function () {\n    //   console.error('You have already piped to this stream. Pipeing twice is likely to break the request.')\n    // })\n  });\n  defer(function () {\n    if (self._aborted) {\n      return;\n    }\n    var end = function () {\n      if (self._form) {\n        if (!self._auth.hasAuth) {\n          self._form.pipe(self);\n        } else if (self._auth.hasAuth && self._auth.sentAuth) {\n          self._form.pipe(self);\n        }\n      }\n      if (self._multipart && self._multipart.chunked) {\n        self._multipart.body.pipe(self);\n      }\n      if (self.body) {\n        if (isstream(self.body)) {\n          self.body.pipe(self);\n        } else {\n          setContentLength();\n          if (Array.isArray(self.body)) {\n            self.body.forEach(function (part) {\n              self.write(part);\n            });\n          } else {\n            self.write(self.body);\n          }\n          self.end();\n        }\n      } else if (self.requestBodyStream) {\n        console.warn('options.requestBodyStream is deprecated, please pass the request object to stream.pipe.');\n        self.requestBodyStream.pipe(self);\n      } else if (!self.src) {\n        if (self._auth.hasAuth && !self._auth.sentAuth) {\n          self.end();\n          return;\n        }\n        if (self.method !== 'GET' && typeof self.method !== 'undefined') {\n          self.setHeader('content-length', 0);\n        }\n        self.end();\n      }\n    };\n    if (self._form && !self.hasHeader('content-length')) {\n      // Before ending the request, we had to compute the length of the whole form, asyncly\n      self.setHeader(self._form.getHeaders(), true);\n      self._form.getLength(function (err, length) {\n        if (!err && !isNaN(length)) {\n          self.setHeader('content-length', length);\n        }\n        end();\n      });\n    } else {\n      end();\n    }\n    self.ntick = true;\n  });\n};\nRequest.prototype.getNewAgent = function () {\n  var self = this;\n  var Agent = self.agentClass;\n  var options = {};\n  if (self.agentOptions) {\n    for (var i in self.agentOptions) {\n      options[i] = self.agentOptions[i];\n    }\n  }\n  if (self.ca) {\n    options.ca = self.ca;\n  }\n  if (self.ciphers) {\n    options.ciphers = self.ciphers;\n  }\n  if (self.secureProtocol) {\n    options.secureProtocol = self.secureProtocol;\n  }\n  if (self.secureOptions) {\n    options.secureOptions = self.secureOptions;\n  }\n  if (typeof self.rejectUnauthorized !== 'undefined') {\n    options.rejectUnauthorized = self.rejectUnauthorized;\n  }\n  if (self.cert && self.key) {\n    options.key = self.key;\n    options.cert = self.cert;\n  }\n  if (self.pfx) {\n    options.pfx = self.pfx;\n  }\n  if (self.passphrase) {\n    options.passphrase = self.passphrase;\n  }\n  var poolKey = '';\n\n  // different types of agents are in different pools\n  if (Agent !== self.httpModule.Agent) {\n    poolKey += Agent.name;\n  }\n\n  // ca option is only relevant if proxy or destination are https\n  var proxy = self.proxy;\n  if (typeof proxy === 'string') {\n    proxy = url.parse(proxy);\n  }\n  var isHttps = proxy && proxy.protocol === 'https:' || this.uri.protocol === 'https:';\n  if (isHttps) {\n    if (options.ca) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.ca;\n    }\n    if (typeof options.rejectUnauthorized !== 'undefined') {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.rejectUnauthorized;\n    }\n    if (options.cert) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.cert.toString('ascii') + options.key.toString('ascii');\n    }\n    if (options.pfx) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.pfx.toString('ascii');\n    }\n    if (options.ciphers) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.ciphers;\n    }\n    if (options.secureProtocol) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.secureProtocol;\n    }\n    if (options.secureOptions) {\n      if (poolKey) {\n        poolKey += ':';\n      }\n      poolKey += options.secureOptions;\n    }\n  }\n  if (self.pool === globalPool && !poolKey && Object.keys(options).length === 0 && self.httpModule.globalAgent) {\n    // not doing anything special.  Use the globalAgent\n    return self.httpModule.globalAgent;\n  }\n\n  // we're using a stored agent.  Make sure it's protocol-specific\n  poolKey = self.uri.protocol + poolKey;\n\n  // generate a new agent for this setting if none yet exists\n  if (!self.pool[poolKey]) {\n    self.pool[poolKey] = new Agent(options);\n    // properly set maxSockets on new agents\n    if (self.pool.maxSockets) {\n      self.pool[poolKey].maxSockets = self.pool.maxSockets;\n    }\n  }\n  return self.pool[poolKey];\n};\nRequest.prototype.start = function () {\n  // start() is called once we are ready to send the outgoing HTTP request.\n  // this is usually called on the first write(), end() or on nextTick()\n  var self = this;\n  if (self.timing) {\n    // All timings will be relative to this request's startTime.  In order to do this,\n    // we need to capture the wall-clock start time (via Date), immediately followed\n    // by the high-resolution timer (via now()).  While these two won't be set\n    // at the _exact_ same time, they should be close enough to be able to calculate\n    // high-resolution, monotonically non-decreasing timestamps relative to startTime.\n    var startTime = new Date().getTime();\n    var startTimeNow = now();\n  }\n  if (self._aborted) {\n    return;\n  }\n  self._started = true;\n  self.method = self.method || 'GET';\n  self.href = self.uri.href;\n  if (self.src && self.src.stat && self.src.stat.size && !self.hasHeader('content-length')) {\n    self.setHeader('content-length', self.src.stat.size);\n  }\n  if (self._aws) {\n    self.aws(self._aws, true);\n  }\n\n  // We have a method named auth, which is completely different from the http.request\n  // auth option.  If we don't remove it, we're gonna have a bad time.\n  var reqOptions = copy(self);\n  delete reqOptions.auth;\n  debug('make request', self.uri.href);\n\n  // node v6.8.0 now supports a `timeout` value in `http.request()`, but we\n  // should delete it for now since we handle timeouts manually for better\n  // consistency with node versions before v6.8.0\n  delete reqOptions.timeout;\n  try {\n    self.req = self.httpModule.request(reqOptions);\n  } catch (err) {\n    self.emit('error', err);\n    return;\n  }\n  if (self.timing) {\n    self.startTime = startTime;\n    self.startTimeNow = startTimeNow;\n\n    // Timing values will all be relative to startTime (by comparing to startTimeNow\n    // so we have an accurate clock)\n    self.timings = {};\n  }\n  var timeout;\n  if (self.timeout && !self.timeoutTimer) {\n    if (self.timeout < 0) {\n      timeout = 0;\n    } else if (typeof self.timeout === 'number' && isFinite(self.timeout)) {\n      timeout = self.timeout;\n    }\n  }\n  self.req.on('response', self.onRequestResponse.bind(self));\n  self.req.on('error', self.onRequestError.bind(self));\n  self.req.on('drain', function () {\n    self.emit('drain');\n  });\n  self.req.on('socket', function (socket) {\n    // `._connecting` was the old property which was made public in node v6.1.0\n    var isConnecting = socket._connecting || socket.connecting;\n    if (self.timing) {\n      self.timings.socket = now() - self.startTimeNow;\n      if (isConnecting) {\n        var onLookupTiming = function () {\n          self.timings.lookup = now() - self.startTimeNow;\n        };\n        var onConnectTiming = function () {\n          self.timings.connect = now() - self.startTimeNow;\n        };\n        socket.once('lookup', onLookupTiming);\n        socket.once('connect', onConnectTiming);\n\n        // clean up timing event listeners if needed on error\n        self.req.once('error', function () {\n          socket.removeListener('lookup', onLookupTiming);\n          socket.removeListener('connect', onConnectTiming);\n        });\n      }\n    }\n    var setReqTimeout = function () {\n      // This timeout sets the amount of time to wait *between* bytes sent\n      // from the server once connected.\n      //\n      // In particular, it's useful for erroring if the server fails to send\n      // data halfway through streaming a response.\n      self.req.setTimeout(timeout, function () {\n        if (self.req) {\n          self.abort();\n          var e = new Error('ESOCKETTIMEDOUT');\n          e.code = 'ESOCKETTIMEDOUT';\n          e.connect = false;\n          self.emit('error', e);\n        }\n      });\n    };\n    if (timeout !== undefined) {\n      // Only start the connection timer if we're actually connecting a new\n      // socket, otherwise if we're already connected (because this is a\n      // keep-alive connection) do not bother. This is important since we won't\n      // get a 'connect' event for an already connected socket.\n      if (isConnecting) {\n        var onReqSockConnect = function () {\n          socket.removeListener('connect', onReqSockConnect);\n          self.clearTimeout();\n          setReqTimeout();\n        };\n        socket.on('connect', onReqSockConnect);\n        self.req.on('error', function (err) {\n          // eslint-disable-line handle-callback-err\n          socket.removeListener('connect', onReqSockConnect);\n        });\n\n        // Set a timeout in memory - this block will throw if the server takes more\n        // than `timeout` to write the HTTP status and headers (corresponding to\n        // the on('response') event on the client). NB: this measures wall-clock\n        // time, not the time between bytes sent by the server.\n        self.timeoutTimer = setTimeout(function () {\n          socket.removeListener('connect', onReqSockConnect);\n          self.abort();\n          var e = new Error('ETIMEDOUT');\n          e.code = 'ETIMEDOUT';\n          e.connect = true;\n          self.emit('error', e);\n        }, timeout);\n      } else {\n        // We're already connected\n        setReqTimeout();\n      }\n    }\n    self.emit('socket', socket);\n  });\n  self.emit('request', self.req);\n};\nRequest.prototype.onRequestError = function (error) {\n  var self = this;\n  if (self._aborted) {\n    return;\n  }\n  if (self.req && self.req._reusedSocket && error.code === 'ECONNRESET' && self.agent.addRequestNoreuse) {\n    self.agent = {\n      addRequest: self.agent.addRequestNoreuse.bind(self.agent)\n    };\n    self.start();\n    self.req.end();\n    return;\n  }\n  self.clearTimeout();\n  self.emit('error', error);\n};\nRequest.prototype.onRequestResponse = function (response) {\n  var self = this;\n  if (self.timing) {\n    self.timings.response = now() - self.startTimeNow;\n  }\n  debug('onRequestResponse', self.uri.href, response.statusCode, response.headers);\n  response.on('end', function () {\n    if (self.timing) {\n      self.timings.end = now() - self.startTimeNow;\n      response.timingStart = self.startTime;\n\n      // fill in the blanks for any periods that didn't trigger, such as\n      // no lookup or connect due to keep alive\n      if (!self.timings.socket) {\n        self.timings.socket = 0;\n      }\n      if (!self.timings.lookup) {\n        self.timings.lookup = self.timings.socket;\n      }\n      if (!self.timings.connect) {\n        self.timings.connect = self.timings.lookup;\n      }\n      if (!self.timings.response) {\n        self.timings.response = self.timings.connect;\n      }\n      debug('elapsed time', self.timings.end);\n\n      // elapsedTime includes all redirects\n      self.elapsedTime += Math.round(self.timings.end);\n\n      // NOTE: elapsedTime is deprecated in favor of .timings\n      response.elapsedTime = self.elapsedTime;\n\n      // timings is just for the final fetch\n      response.timings = self.timings;\n\n      // pre-calculate phase timings as well\n      response.timingPhases = {\n        wait: self.timings.socket,\n        dns: self.timings.lookup - self.timings.socket,\n        tcp: self.timings.connect - self.timings.lookup,\n        firstByte: self.timings.response - self.timings.connect,\n        download: self.timings.end - self.timings.response,\n        total: self.timings.end\n      };\n    }\n    debug('response end', self.uri.href, response.statusCode, response.headers);\n  });\n  if (self._aborted) {\n    debug('aborted', self.uri.href);\n    response.resume();\n    return;\n  }\n  self.response = response;\n  response.request = self;\n  response.toJSON = responseToJSON;\n\n  // XXX This is different on 0.10, because SSL is strict by default\n  if (self.httpModule === https && self.strictSSL && (!response.hasOwnProperty('socket') || !response.socket.authorized)) {\n    debug('strict ssl error', self.uri.href);\n    var sslErr = response.hasOwnProperty('socket') ? response.socket.authorizationError : self.uri.href + ' does not support SSL';\n    self.emit('error', new Error('SSL Error: ' + sslErr));\n    return;\n  }\n\n  // Save the original host before any redirect (if it changes, we need to\n  // remove any authorization headers).  Also remember the case of the header\n  // name because lots of broken servers expect Host instead of host and we\n  // want the caller to be able to specify this.\n  self.originalHost = self.getHeader('host');\n  if (!self.originalHostHeaderName) {\n    self.originalHostHeaderName = self.hasHeader('host');\n  }\n  if (self.setHost) {\n    self.removeHeader('host');\n  }\n  self.clearTimeout();\n  var targetCookieJar = self._jar && self._jar.setCookie ? self._jar : globalCookieJar;\n  var addCookie = function (cookie) {\n    // set the cookie if it's domain in the href's domain.\n    try {\n      targetCookieJar.setCookie(cookie, self.uri.href, {\n        ignoreError: true\n      });\n    } catch (e) {\n      self.emit('error', e);\n    }\n  };\n  response.caseless = caseless(response.headers);\n  if (response.caseless.has('set-cookie') && !self._disableCookies) {\n    var headerName = response.caseless.has('set-cookie');\n    if (Array.isArray(response.headers[headerName])) {\n      response.headers[headerName].forEach(addCookie);\n    } else {\n      addCookie(response.headers[headerName]);\n    }\n  }\n  self._redirect.onResponse(response, function (err, followingRedirect) {\n    if (!err && followingRedirect) return; // Ignore the rest of the response\n    if (err) self.emit('error', err);\n\n    // Be a good stream and emit end when the response is finished.\n    // Hack to emit end on close because of a core bug that never fires end\n    response.on('close', function () {\n      if (!self._ended) {\n        self._ended = true;\n        self.response.emit('end');\n      }\n    });\n    response.once('end', function () {\n      self._ended = true;\n    });\n    var noBody = function (code) {\n      return self.method === 'HEAD' ||\n      // Informational\n      code >= 100 && code < 200 ||\n      // No Content\n      code === 204 ||\n      // Not Modified\n      code === 304;\n    };\n    var responseContent;\n    if (self.gzip && !noBody(response.statusCode)) {\n      var contentEncoding = response.headers['content-encoding'] || 'identity';\n      contentEncoding = contentEncoding.trim().toLowerCase();\n\n      // Be more lenient with decoding compressed responses, since (very rarely)\n      // servers send slightly invalid gzip responses that are still accepted\n      // by common browsers.\n      // Always using Z_SYNC_FLUSH is what cURL does.\n      var zlibOptions = {\n        flush: zlib.Z_SYNC_FLUSH,\n        finishFlush: zlib.Z_SYNC_FLUSH\n      };\n      if (contentEncoding === 'gzip') {\n        responseContent = zlib.createGunzip(zlibOptions);\n        response.pipe(responseContent);\n      } else if (contentEncoding === 'deflate') {\n        responseContent = zlib.createInflate(zlibOptions);\n        response.pipe(responseContent);\n      } else {\n        // Since previous versions didn't check for Content-Encoding header,\n        // ignore any invalid values to preserve backwards-compatibility\n        if (contentEncoding !== 'identity') {\n          debug('ignoring unrecognized Content-Encoding ' + contentEncoding);\n        }\n        responseContent = response;\n      }\n    } else {\n      responseContent = response;\n    }\n    if (self.encoding) {\n      if (self.dests.length !== 0) {\n        console.error('Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.');\n      } else {\n        responseContent.setEncoding(self.encoding);\n      }\n    }\n    if (self._paused) {\n      responseContent.pause();\n    }\n    self.responseContent = responseContent;\n    self.emit('response', response);\n    self.dests.forEach(function (dest) {\n      self.pipeDest(dest);\n    });\n    responseContent.on('data', function (chunk) {\n      if (self.timing && !self.responseStarted) {\n        self.responseStartTime = new Date().getTime();\n\n        // NOTE: responseStartTime is deprecated in favor of .timings\n        response.responseStartTime = self.responseStartTime;\n      }\n      self._destdata = true;\n      self.emit('data', chunk);\n    });\n    responseContent.once('end', function (chunk) {\n      self.emit('end', chunk);\n    });\n    responseContent.on('error', function (error) {\n      if (error.code === 'ECONNRESET' && error.message === 'aborted' && self.listenerCount('error') === 0) {\n        // Node 16 causes aborts to emit errors if there is an error listener.\n        // Without this short-circuit, it will cause unhandled exceptions since\n        // there is not always an `error` listener on `self`, but there will\n        // always be an `error` listener on `responseContent`.\n        // @see https://github.com/nodejs/node/pull/33172\n        return;\n      }\n      self.emit('error', error);\n    });\n    responseContent.on('close', function () {\n      self.emit('close');\n    });\n    if (self.callback) {\n      self.readResponseBody(response);\n    } else {\n      // if no callback\n      self.on('end', function () {\n        if (self._aborted) {\n          debug('aborted', self.uri.href);\n          return;\n        }\n        self.emit('complete', response);\n      });\n    }\n    debug('finish init function', self.uri.href);\n  });\n};\nRequest.prototype.readResponseBody = function (response) {\n  var self = this;\n  debug(\"reading response's body\");\n  var buffers = [];\n  var bufferLength = 0;\n  var strings = [];\n  self.on('data', function (chunk) {\n    if (!Buffer.isBuffer(chunk)) {\n      strings.push(chunk);\n    } else if (chunk.length) {\n      bufferLength += chunk.length;\n      buffers.push(chunk);\n    }\n  });\n  self.on('end', function () {\n    debug('end event', self.uri.href);\n    if (self._aborted) {\n      debug('aborted', self.uri.href);\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = [];\n      bufferLength = 0;\n      return;\n    }\n    if (bufferLength) {\n      debug('has body', self.uri.href, bufferLength);\n      response.body = Buffer.concat(buffers, bufferLength);\n      if (self.encoding !== null) {\n        response.body = response.body.toString(self.encoding);\n      }\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the Request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = [];\n      bufferLength = 0;\n    } else if (strings.length) {\n      // The UTF8 BOM [0xEF,0xBB,0xBF] is converted to [0xFE,0xFF] in the JS UTC16/UCS2 representation.\n      // Strip this value out when the encoding is set to 'utf8', as upstream consumers won't expect it and it breaks JSON.parse().\n      if (self.encoding === 'utf8' && strings[0].length > 0 && strings[0][0] === '\\uFEFF') {\n        strings[0] = strings[0].substring(1);\n      }\n      response.body = strings.join('');\n    }\n    if (self._json) {\n      try {\n        response.body = JSON.parse(response.body, self._jsonReviver);\n      } catch (e) {\n        debug('invalid JSON received', self.uri.href);\n      }\n    }\n    debug('emitting complete', self.uri.href);\n    if (typeof response.body === 'undefined' && !self._json) {\n      response.body = self.encoding === null ? Buffer.alloc(0) : '';\n    }\n    self.emit('complete', response, response.body);\n  });\n};\nRequest.prototype.abort = function () {\n  var self = this;\n  self._aborted = true;\n  if (self.req) {\n    self.req.abort();\n  } else if (self.response) {\n    self.response.destroy();\n  }\n  self.clearTimeout();\n  self.emit('abort');\n};\nRequest.prototype.pipeDest = function (dest) {\n  var self = this;\n  var response = self.response;\n  // Called after the response is received\n  if (dest.headers && !dest.headersSent) {\n    if (response.caseless.has('content-type')) {\n      var ctname = response.caseless.has('content-type');\n      if (dest.setHeader) {\n        dest.setHeader(ctname, response.headers[ctname]);\n      } else {\n        dest.headers[ctname] = response.headers[ctname];\n      }\n    }\n    if (response.caseless.has('content-length')) {\n      var clname = response.caseless.has('content-length');\n      if (dest.setHeader) {\n        dest.setHeader(clname, response.headers[clname]);\n      } else {\n        dest.headers[clname] = response.headers[clname];\n      }\n    }\n  }\n  if (dest.setHeader && !dest.headersSent) {\n    for (var i in response.headers) {\n      // If the response content is being decoded, the Content-Encoding header\n      // of the response doesn't represent the piped content, so don't pass it.\n      if (!self.gzip || i !== 'content-encoding') {\n        dest.setHeader(i, response.headers[i]);\n      }\n    }\n    dest.statusCode = response.statusCode;\n  }\n  if (self.pipefilter) {\n    self.pipefilter(response, dest);\n  }\n};\nRequest.prototype.qs = function (q, clobber) {\n  var self = this;\n  var base;\n  if (!clobber && self.uri.query) {\n    base = self._qs.parse(self.uri.query);\n  } else {\n    base = {};\n  }\n  for (var i in q) {\n    base[i] = q[i];\n  }\n  var qs = self._qs.stringify(base);\n  if (qs === '') {\n    return self;\n  }\n  self.uri = url.parse(self.uri.href.split('?')[0] + '?' + qs);\n  self.url = self.uri;\n  self.path = self.uri.path;\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket();\n  }\n  return self;\n};\nRequest.prototype.form = function (form) {\n  var self = this;\n  if (form) {\n    if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n      self.setHeader('content-type', 'application/x-www-form-urlencoded');\n    }\n    self.body = typeof form === 'string' ? self._qs.rfc3986(form.toString('utf8')) : self._qs.stringify(form).toString('utf8');\n    return self;\n  }\n  // create form-data object\n  self._form = new FormData();\n  self._form.on('error', function (err) {\n    err.message = 'form-data: ' + err.message;\n    self.emit('error', err);\n    self.abort();\n  });\n  return self._form;\n};\nRequest.prototype.multipart = function (multipart) {\n  var self = this;\n  self._multipart.onRequest(multipart);\n  if (!self._multipart.chunked) {\n    self.body = self._multipart.body;\n  }\n  return self;\n};\nRequest.prototype.json = function (val) {\n  var self = this;\n  if (!self.hasHeader('accept')) {\n    self.setHeader('accept', 'application/json');\n  }\n  if (typeof self.jsonReplacer === 'function') {\n    self._jsonReplacer = self.jsonReplacer;\n  }\n  self._json = true;\n  if (typeof val === 'boolean') {\n    if (self.body !== undefined) {\n      if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n        self.body = safeStringify(self.body, self._jsonReplacer);\n      } else {\n        self.body = self._qs.rfc3986(self.body);\n      }\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json');\n      }\n    }\n  } else {\n    self.body = safeStringify(val, self._jsonReplacer);\n    if (!self.hasHeader('content-type')) {\n      self.setHeader('content-type', 'application/json');\n    }\n  }\n  if (typeof self.jsonReviver === 'function') {\n    self._jsonReviver = self.jsonReviver;\n  }\n  return self;\n};\nRequest.prototype.getHeader = function (name, headers) {\n  var self = this;\n  var result, re, match;\n  if (!headers) {\n    headers = self.headers;\n  }\n  Object.keys(headers).forEach(function (key) {\n    if (key.length !== name.length) {\n      return;\n    }\n    re = new RegExp(name, 'i');\n    match = key.match(re);\n    if (match) {\n      result = headers[key];\n    }\n  });\n  return result;\n};\nRequest.prototype.enableUnixSocket = function () {\n  // Get the socket & request paths from the URL\n  var unixParts = this.uri.path.split(':');\n  var host = unixParts[0];\n  var path = unixParts[1];\n  // Apply unix properties to request\n  this.socketPath = host;\n  this.uri.pathname = path;\n  this.uri.path = path;\n  this.uri.host = host;\n  this.uri.hostname = host;\n  this.uri.isUnix = true;\n};\nRequest.prototype.auth = function (user, pass, sendImmediately, bearer) {\n  var self = this;\n  self._auth.onRequest(user, pass, sendImmediately, bearer);\n  return self;\n};\nRequest.prototype.aws = function (opts, now) {\n  var self = this;\n  if (!now) {\n    self._aws = opts;\n    return self;\n  }\n  if (opts.sign_version === 4 || opts.sign_version === '4') {\n    // use aws4\n    var options = {\n      host: self.uri.host,\n      path: self.uri.path,\n      method: self.method,\n      headers: self.headers,\n      body: self.body\n    };\n    if (opts.service) {\n      options.service = opts.service;\n    }\n    var signRes = aws4.sign(options, {\n      accessKeyId: opts.key,\n      secretAccessKey: opts.secret,\n      sessionToken: opts.session\n    });\n    self.setHeader('authorization', signRes.headers.Authorization);\n    self.setHeader('x-amz-date', signRes.headers['X-Amz-Date']);\n    if (signRes.headers['X-Amz-Security-Token']) {\n      self.setHeader('x-amz-security-token', signRes.headers['X-Amz-Security-Token']);\n    }\n  } else {\n    // default: use aws-sign2\n    var date = new Date();\n    self.setHeader('date', date.toUTCString());\n    var auth = {\n      key: opts.key,\n      secret: opts.secret,\n      verb: self.method.toUpperCase(),\n      date: date,\n      contentType: self.getHeader('content-type') || '',\n      md5: self.getHeader('content-md5') || '',\n      amazonHeaders: aws2.canonicalizeHeaders(self.headers)\n    };\n    var path = self.uri.path;\n    if (opts.bucket && path) {\n      auth.resource = '/' + opts.bucket + path;\n    } else if (opts.bucket && !path) {\n      auth.resource = '/' + opts.bucket;\n    } else if (!opts.bucket && path) {\n      auth.resource = path;\n    } else if (!opts.bucket && !path) {\n      auth.resource = '/';\n    }\n    auth.resource = aws2.canonicalizeResource(auth.resource);\n    self.setHeader('authorization', aws2.authorization(auth));\n  }\n  return self;\n};\nRequest.prototype.httpSignature = function (opts) {\n  var self = this;\n  httpSignature.signRequest({\n    getHeader: function (header) {\n      return self.getHeader(header, self.headers);\n    },\n    setHeader: function (header, value) {\n      self.setHeader(header, value);\n    },\n    method: self.method,\n    path: self.path\n  }, opts);\n  debug('httpSignature authorization', self.getHeader('authorization'));\n  return self;\n};\nRequest.prototype.hawk = function (opts) {\n  var self = this;\n  self.setHeader('Authorization', hawk.header(self.uri, self.method, opts));\n};\nRequest.prototype.jar = function (jar) {\n  var self = this;\n  var cookies;\n  if (self._redirect.redirectsFollowed === 0) {\n    self.originalCookieHeader = self.getHeader('cookie');\n  }\n  if (!jar) {\n    // disable cookies\n    cookies = false;\n    self._disableCookies = true;\n  } else {\n    var targetCookieJar = jar.getCookieString ? jar : globalCookieJar;\n    var urihref = self.uri.href;\n    // fetch cookie in the Specified host\n    if (targetCookieJar) {\n      cookies = targetCookieJar.getCookieString(urihref);\n    }\n  }\n\n  // if need cookie and cookie is not empty\n  if (cookies && cookies.length) {\n    if (self.originalCookieHeader) {\n      // Don't overwrite existing Cookie header\n      self.setHeader('cookie', self.originalCookieHeader + '; ' + cookies);\n    } else {\n      self.setHeader('cookie', cookies);\n    }\n  }\n  self._jar = jar;\n  return self;\n};\n\n// Stream API\nRequest.prototype.pipe = function (dest, opts) {\n  var self = this;\n  if (self.response) {\n    if (self._destdata) {\n      self.emit('error', new Error('You cannot pipe after data has been emitted from the response.'));\n    } else if (self._ended) {\n      self.emit('error', new Error('You cannot pipe after the response has been ended.'));\n    } else {\n      stream.Stream.prototype.pipe.call(self, dest, opts);\n      self.pipeDest(dest);\n      return dest;\n    }\n  } else {\n    self.dests.push(dest);\n    stream.Stream.prototype.pipe.call(self, dest, opts);\n    return dest;\n  }\n};\nRequest.prototype.write = function () {\n  var self = this;\n  if (self._aborted) {\n    return;\n  }\n  if (!self._started) {\n    self.start();\n  }\n  if (self.req) {\n    return self.req.write.apply(self.req, arguments);\n  }\n};\nRequest.prototype.end = function (chunk) {\n  var self = this;\n  if (self._aborted) {\n    return;\n  }\n  if (chunk) {\n    self.write(chunk);\n  }\n  if (!self._started) {\n    self.start();\n  }\n  if (self.req) {\n    self.req.end();\n  }\n};\nRequest.prototype.pause = function () {\n  var self = this;\n  if (!self.responseContent) {\n    self._paused = true;\n  } else {\n    self.responseContent.pause.apply(self.responseContent, arguments);\n  }\n};\nRequest.prototype.resume = function () {\n  var self = this;\n  if (!self.responseContent) {\n    self._paused = false;\n  } else {\n    self.responseContent.resume.apply(self.responseContent, arguments);\n  }\n};\nRequest.prototype.destroy = function () {\n  var self = this;\n  this.clearTimeout();\n  if (!self._ended) {\n    self.end();\n  } else if (self.response) {\n    self.response.destroy();\n  }\n};\nRequest.prototype.clearTimeout = function () {\n  if (this.timeoutTimer) {\n    clearTimeout(this.timeoutTimer);\n    this.timeoutTimer = null;\n  }\n};\nRequest.defaultProxyHeaderWhiteList = Tunnel.defaultProxyHeaderWhiteList.slice();\nRequest.defaultProxyHeaderExclusiveList = Tunnel.defaultProxyHeaderExclusiveList.slice();\n\n// Exports\n\nRequest.prototype.toJSON = requestToJSON;\nmodule.exports = Request;","map":{"version":3,"names":["http","require","https","url","util","stream","zlib","aws2","aws4","httpSignature","mime","caseless","ForeverAgent","FormData","extend","isstream","isTypedArray","strict","helpers","cookies","getProxyFromURI","Querystring","Har","Auth","hawk","Multipart","Redirect","Tunnel","now","Buffer","safeStringify","isReadStream","toBase64","defer","copy","version","globalCookieJar","jar","globalPool","filterForNonReserved","reserved","options","object","i","notReserved","indexOf","filterOutReservedFunctions","isReserved","isFunction","requestToJSON","self","uri","method","headers","responseToJSON","statusCode","body","request","call","Request","har","_har","Stream","Object","keys","prototype","nonReserved","readable","writable","explicitMethod","_qs","_auth","_multipart","_redirect","_tunnel","init","inherits","debug","process","env","NODE_DEBUG","test","console","error","format","apply","arguments","headerName","httpify","localAddress","pool","dests","__isRequestRequest","_callback","callback","_callbackCalled","on","bind","baseUrl","emit","Error","baseUrlEndsWithSlash","lastIndexOf","length","uriStartsWithSlash","slice","parse","href","protocol","host","enableUnixSocket","strictSSL","rejectUnauthorized","pathname","hostname","port","isUnix","faultyUri","message","abort","hasOwnProperty","proxy","tunnel","isEnabled","setup","onRequest","setHost","hasHeader","hostHeaderName","originalHostHeaderName","setHeader","_jar","form","formData","requestForm","appendFormValue","key","value","append","formKey","formValue","Array","j","qs","path","search","aws","auth","user","username","pass","password","sendImmediately","bearer","gzip","uriAuthPieces","split","map","item","unescape","join","proxyAuthPieces","authHeader","json","multipart","time","timing","elapsedTime","setContentLength","from","byteLength","isArray","reduce","a","b","defaultModules","httpModules","httpModule","ca","agent","agentOptions","agentClass","forever","v","major","minor","SSL","Agent","keepAlive","getNewAgent","src","ntick","_started","lookup","_json","_aborted","end","_form","hasAuth","pipe","sentAuth","chunked","forEach","part","write","requestBodyStream","warn","getHeaders","getLength","err","isNaN","ciphers","secureProtocol","secureOptions","cert","pfx","passphrase","poolKey","name","isHttps","toString","globalAgent","maxSockets","start","startTime","Date","getTime","startTimeNow","stat","size","_aws","reqOptions","timeout","req","timings","timeoutTimer","isFinite","onRequestResponse","onRequestError","socket","isConnecting","_connecting","connecting","onLookupTiming","onConnectTiming","connect","once","removeListener","setReqTimeout","setTimeout","e","code","undefined","onReqSockConnect","clearTimeout","_reusedSocket","addRequestNoreuse","addRequest","response","timingStart","Math","round","timingPhases","wait","dns","tcp","firstByte","download","total","resume","toJSON","authorized","sslErr","authorizationError","originalHost","getHeader","removeHeader","targetCookieJar","setCookie","addCookie","cookie","ignoreError","has","_disableCookies","onResponse","followingRedirect","_ended","noBody","responseContent","contentEncoding","trim","toLowerCase","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createInflate","encoding","setEncoding","_paused","pause","dest","pipeDest","chunk","responseStarted","responseStartTime","_destdata","listenerCount","readResponseBody","buffers","bufferLength","strings","isBuffer","push","concat","substring","JSON","_jsonReviver","alloc","destroy","headersSent","ctname","clname","pipefilter","q","clobber","base","query","stringify","rfc3986","val","jsonReplacer","_jsonReplacer","jsonReviver","result","re","match","RegExp","unixParts","socketPath","opts","sign_version","service","signRes","sign","accessKeyId","secretAccessKey","secret","sessionToken","session","Authorization","date","toUTCString","verb","toUpperCase","contentType","md5","amazonHeaders","canonicalizeHeaders","bucket","resource","canonicalizeResource","authorization","signRequest","header","redirectsFollowed","originalCookieHeader","getCookieString","urihref","defaultProxyHeaderWhiteList","defaultProxyHeaderExclusiveList","module","exports"],"sources":["/Users/boristrunov/Desktop/LevelCoin/project/node_modules/@cypress/request/request.js"],"sourcesContent":["'use strict'\n\nvar http = require('http')\nvar https = require('https')\nvar url = require('url')\nvar util = require('util')\nvar stream = require('stream')\nvar zlib = require('zlib')\nvar aws2 = require('aws-sign2')\nvar aws4 = require('aws4')\nvar httpSignature = require('http-signature')\nvar mime = require('mime-types')\nvar caseless = require('caseless')\nvar ForeverAgent = require('forever-agent')\nvar FormData = require('form-data')\nvar extend = require('extend')\nvar isstream = require('isstream')\nvar isTypedArray = require('is-typedarray').strict\nvar helpers = require('./lib/helpers')\nvar cookies = require('./lib/cookies')\nvar getProxyFromURI = require('./lib/getProxyFromURI')\nvar Querystring = require('./lib/querystring').Querystring\nvar Har = require('./lib/har').Har\nvar Auth = require('./lib/auth').Auth\nvar hawk = require('./lib/hawk')\nvar Multipart = require('./lib/multipart').Multipart\nvar Redirect = require('./lib/redirect').Redirect\nvar Tunnel = require('./lib/tunnel').Tunnel\nvar now = require('performance-now')\nvar Buffer = require('safe-buffer').Buffer\n\nvar safeStringify = helpers.safeStringify\nvar isReadStream = helpers.isReadStream\nvar toBase64 = helpers.toBase64\nvar defer = helpers.defer\nvar copy = helpers.copy\nvar version = helpers.version\nvar globalCookieJar = cookies.jar()\n\nvar globalPool = {}\n\nfunction filterForNonReserved (reserved, options) {\n  // Filter out properties that are not reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {}\n  for (var i in options) {\n    var notReserved = (reserved.indexOf(i) === -1)\n    if (notReserved) {\n      object[i] = options[i]\n    }\n  }\n  return object\n}\n\nfunction filterOutReservedFunctions (reserved, options) {\n  // Filter out properties that are functions and are reserved.\n  // Reserved values are passed in at call site.\n\n  var object = {}\n  for (var i in options) {\n    var isReserved = !(reserved.indexOf(i) === -1)\n    var isFunction = (typeof options[i] === 'function')\n    if (!(isReserved && isFunction)) {\n      object[i] = options[i]\n    }\n  }\n  return object\n}\n\n// Return a simpler request object to allow serialization\nfunction requestToJSON () {\n  var self = this\n  return {\n    uri: self.uri,\n    method: self.method,\n    headers: self.headers\n  }\n}\n\n// Return a simpler response object to allow serialization\nfunction responseToJSON () {\n  var self = this\n  return {\n    statusCode: self.statusCode,\n    body: self.body,\n    headers: self.headers,\n    request: requestToJSON.call(self.request)\n  }\n}\n\nfunction Request (options) {\n  // if given the method property in options, set property explicitMethod to true\n\n  // extend the Request instance with any non-reserved properties\n  // remove any reserved functions from the options object\n  // set Request instance to be readable and writable\n  // call init\n\n  var self = this\n\n  // start with HAR, then override with additional options\n  if (options.har) {\n    self._har = new Har(self)\n    options = self._har.options(options)\n  }\n\n  stream.Stream.call(self)\n  var reserved = Object.keys(Request.prototype)\n  var nonReserved = filterForNonReserved(reserved, options)\n\n  extend(self, nonReserved)\n  options = filterOutReservedFunctions(reserved, options)\n\n  self.readable = true\n  self.writable = true\n  if (options.method) {\n    self.explicitMethod = true\n  }\n  self._qs = new Querystring(self)\n  self._auth = new Auth(self)\n  self._multipart = new Multipart(self)\n  self._redirect = new Redirect(self)\n  self._tunnel = new Tunnel(self)\n  self.init(options)\n}\n\nutil.inherits(Request, stream.Stream)\n\n// Debugging\nRequest.debug = process.env.NODE_DEBUG && /\\brequest\\b/.test(process.env.NODE_DEBUG)\nfunction debug () {\n  if (Request.debug) {\n    console.error('REQUEST %s', util.format.apply(util, arguments))\n  }\n}\nRequest.prototype.debug = debug\n\nRequest.prototype.init = function (options) {\n  // init() contains all the code to setup the request object.\n  // the actual outgoing request is not started until start() is called\n  // this function is called from both the constructor and on redirect.\n  var self = this\n  if (!options) {\n    options = {}\n  }\n  self.headers = self.headers ? copy(self.headers) : {}\n\n  // Delete headers with value undefined since they break\n  // ClientRequest.OutgoingMessage.setHeader in node 0.12\n  for (var headerName in self.headers) {\n    if (typeof self.headers[headerName] === 'undefined') {\n      delete self.headers[headerName]\n    }\n  }\n\n  caseless.httpify(self, self.headers)\n\n  if (!self.method) {\n    self.method = options.method || 'GET'\n  }\n  if (!self.localAddress) {\n    self.localAddress = options.localAddress\n  }\n\n  self._qs.init(options)\n\n  debug(options)\n  if (!self.pool && self.pool !== false) {\n    self.pool = globalPool\n  }\n  self.dests = self.dests || []\n  self.__isRequestRequest = true\n\n  // Protect against double callback\n  if (!self._callback && self.callback) {\n    self._callback = self.callback\n    self.callback = function () {\n      if (self._callbackCalled) {\n        return // Print a warning maybe?\n      }\n      self._callbackCalled = true\n      self._callback.apply(self, arguments)\n    }\n    self.on('error', self.callback.bind())\n    self.on('complete', self.callback.bind(self, null))\n  }\n\n  // People use this property instead all the time, so support it\n  if (!self.uri && self.url) {\n    self.uri = self.url\n    delete self.url\n  }\n\n  // If there's a baseUrl, then use it as the base URL (i.e. uri must be\n  // specified as a relative path and is appended to baseUrl).\n  if (self.baseUrl) {\n    if (typeof self.baseUrl !== 'string') {\n      return self.emit('error', new Error('options.baseUrl must be a string'))\n    }\n\n    if (typeof self.uri !== 'string') {\n      return self.emit('error', new Error('options.uri must be a string when using options.baseUrl'))\n    }\n\n    if (self.uri.indexOf('//') === 0 || self.uri.indexOf('://') !== -1) {\n      return self.emit('error', new Error('options.uri must be a path when using options.baseUrl'))\n    }\n\n    // Handle all cases to make sure that there's only one slash between\n    // baseUrl and uri.\n    var baseUrlEndsWithSlash = self.baseUrl.lastIndexOf('/') === self.baseUrl.length - 1\n    var uriStartsWithSlash = self.uri.indexOf('/') === 0\n\n    if (baseUrlEndsWithSlash && uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri.slice(1)\n    } else if (baseUrlEndsWithSlash || uriStartsWithSlash) {\n      self.uri = self.baseUrl + self.uri\n    } else if (self.uri === '') {\n      self.uri = self.baseUrl\n    } else {\n      self.uri = self.baseUrl + '/' + self.uri\n    }\n    delete self.baseUrl\n  }\n\n  // A URI is needed by this point, emit error if we haven't been able to get one\n  if (!self.uri) {\n    return self.emit('error', new Error('options.uri is a required argument'))\n  }\n\n  // If a string URI/URL was given, parse it into a URL object\n  if (typeof self.uri === 'string') {\n    self.uri = url.parse(self.uri)\n  }\n\n  // Some URL objects are not from a URL parsed string and need href added\n  if (!self.uri.href) {\n    self.uri.href = url.format(self.uri)\n  }\n\n  // DEPRECATED: Warning for users of the old Unix Sockets URL Scheme\n  if (self.uri.protocol === 'unix:') {\n    return self.emit('error', new Error('`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`'))\n  }\n\n  // Support Unix Sockets\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket()\n  }\n\n  if (self.strictSSL === false) {\n    self.rejectUnauthorized = false\n  }\n\n  if (!self.uri.pathname) { self.uri.pathname = '/' }\n\n  if (!(self.uri.host || (self.uri.hostname && self.uri.port)) && !self.uri.isUnix) {\n    // Invalid URI: it may generate lot of bad errors, like 'TypeError: Cannot call method `indexOf` of undefined' in CookieJar\n    // Detect and reject it as soon as possible\n    var faultyUri = url.format(self.uri)\n    var message = 'Invalid URI \"' + faultyUri + '\"'\n    if (Object.keys(options).length === 0) {\n      // No option ? This can be the sign of a redirect\n      // As this is a case where the user cannot do anything (they didn't call request directly with this URL)\n      // they should be warned that it can be caused by a redirection (can save some hair)\n      message += '. This can be caused by a crappy redirection.'\n    }\n    // This error was fatal\n    self.abort()\n    return self.emit('error', new Error(message))\n  }\n\n  if (!self.hasOwnProperty('proxy')) {\n    self.proxy = getProxyFromURI(self.uri)\n  }\n\n  self.tunnel = self._tunnel.isEnabled()\n  if (self.proxy) {\n    self._tunnel.setup(options)\n  }\n\n  self._redirect.onRequest(options)\n\n  self.setHost = false\n  if (!self.hasHeader('host')) {\n    var hostHeaderName = self.originalHostHeaderName || 'host'\n    self.setHeader(hostHeaderName, self.uri.host)\n    // Drop :port suffix from Host header if known protocol.\n    if (self.uri.port) {\n      if ((self.uri.port === '80' && self.uri.protocol === 'http:') ||\n          (self.uri.port === '443' && self.uri.protocol === 'https:')) {\n        self.setHeader(hostHeaderName, self.uri.hostname)\n      }\n    }\n    self.setHost = true\n  }\n\n  self.jar(self._jar || options.jar)\n\n  if (!self.uri.port) {\n    if (self.uri.protocol === 'http:') { self.uri.port = 80 } else if (self.uri.protocol === 'https:') { self.uri.port = 443 }\n  }\n\n  if (self.proxy && !self.tunnel) {\n    self.port = self.proxy.port\n    self.host = self.proxy.hostname\n  } else {\n    self.port = self.uri.port\n    self.host = self.uri.hostname\n  }\n\n  if (options.form) {\n    self.form(options.form)\n  }\n\n  if (options.formData) {\n    var formData = options.formData\n    var requestForm = self.form()\n    var appendFormValue = function (key, value) {\n      if (value && value.hasOwnProperty('value') && value.hasOwnProperty('options')) {\n        requestForm.append(key, value.value, value.options)\n      } else {\n        requestForm.append(key, value)\n      }\n    }\n    for (var formKey in formData) {\n      if (formData.hasOwnProperty(formKey)) {\n        var formValue = formData[formKey]\n        if (formValue instanceof Array) {\n          for (var j = 0; j < formValue.length; j++) {\n            appendFormValue(formKey, formValue[j])\n          }\n        } else {\n          appendFormValue(formKey, formValue)\n        }\n      }\n    }\n  }\n\n  if (options.qs) {\n    self.qs(options.qs)\n  }\n\n  if (self.uri.path) {\n    self.path = self.uri.path\n  } else {\n    self.path = self.uri.pathname + (self.uri.search || '')\n  }\n\n  if (self.path.length === 0) {\n    self.path = '/'\n  }\n\n  // Auth must happen last in case signing is dependent on other headers\n  if (options.aws) {\n    self.aws(options.aws)\n  }\n\n  if (options.hawk) {\n    self.hawk(options.hawk)\n  }\n\n  if (options.httpSignature) {\n    self.httpSignature(options.httpSignature)\n  }\n\n  if (options.auth) {\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'username')) {\n      options.auth.user = options.auth.username\n    }\n    if (Object.prototype.hasOwnProperty.call(options.auth, 'password')) {\n      options.auth.pass = options.auth.password\n    }\n\n    self.auth(\n      options.auth.user,\n      options.auth.pass,\n      options.auth.sendImmediately,\n      options.auth.bearer\n    )\n  }\n\n  if (self.gzip && !self.hasHeader('accept-encoding')) {\n    self.setHeader('accept-encoding', 'gzip, deflate')\n  }\n\n  if (self.uri.auth && !self.hasHeader('authorization')) {\n    var uriAuthPieces = self.uri.auth.split(':').map(function (item) { return self._qs.unescape(item) })\n    self.auth(uriAuthPieces[0], uriAuthPieces.slice(1).join(':'), true)\n  }\n\n  if (!self.tunnel && self.proxy && self.proxy.auth && !self.hasHeader('proxy-authorization')) {\n    var proxyAuthPieces = self.proxy.auth.split(':').map(function (item) { return self._qs.unescape(item) })\n    var authHeader = 'Basic ' + toBase64(proxyAuthPieces.join(':'))\n    self.setHeader('proxy-authorization', authHeader)\n  }\n\n  if (self.proxy && !self.tunnel) {\n    self.path = (self.uri.protocol + '//' + self.uri.host + self.path)\n  }\n\n  if (options.json) {\n    self.json(options.json)\n  }\n  if (options.multipart) {\n    self.multipart(options.multipart)\n  }\n\n  if (options.time) {\n    self.timing = true\n\n    // NOTE: elapsedTime is deprecated in favor of .timings\n    self.elapsedTime = self.elapsedTime || 0\n  }\n\n  function setContentLength () {\n    if (isTypedArray(self.body)) {\n      self.body = Buffer.from(self.body)\n    }\n\n    if (!self.hasHeader('content-length')) {\n      var length\n      if (typeof self.body === 'string') {\n        length = Buffer.byteLength(self.body)\n      } else if (Array.isArray(self.body)) {\n        length = self.body.reduce(function (a, b) { return a + b.length }, 0)\n      } else {\n        length = self.body.length\n      }\n\n      if (length) {\n        self.setHeader('content-length', length)\n      } else {\n        self.emit('error', new Error('Argument error, options.body.'))\n      }\n    }\n  }\n  if (self.body && !isstream(self.body)) {\n    setContentLength()\n  }\n\n  var protocol = self.proxy && !self.tunnel ? self.proxy.protocol : self.uri.protocol\n  var defaultModules = {'http:': http, 'https:': https}\n  var httpModules = self.httpModules || {}\n\n  self.httpModule = httpModules[protocol] || defaultModules[protocol]\n\n  if (!self.httpModule) {\n    return self.emit('error', new Error('Invalid protocol: ' + protocol))\n  }\n\n  if (options.ca) {\n    self.ca = options.ca\n  }\n\n  if (!self.agent) {\n    if (options.agentOptions) {\n      self.agentOptions = options.agentOptions\n    }\n\n    if (options.agentClass) {\n      self.agentClass = options.agentClass\n    } else if (options.forever) {\n      var v = version()\n      // use ForeverAgent in node 0.10- only\n      if (v.major === 0 && v.minor <= 10) {\n        self.agentClass = protocol === 'http:' ? ForeverAgent : ForeverAgent.SSL\n      } else {\n        self.agentClass = self.httpModule.Agent\n        self.agentOptions = self.agentOptions || {}\n        self.agentOptions.keepAlive = true\n      }\n    } else {\n      self.agentClass = self.httpModule.Agent\n    }\n  }\n\n  if (self.pool === false) {\n    self.agent = false\n  } else {\n    self.agent = self.agent || self.getNewAgent()\n  }\n\n  self.on('pipe', function (src) {\n    if (self.ntick && self._started) {\n      self.emit('error', new Error('You cannot pipe to this stream after the outbound request has started.'))\n    }\n    self.src = src\n    if (isReadStream(src)) {\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', mime.lookup(src.path))\n      }\n    } else {\n      if (src.headers) {\n        for (var i in src.headers) {\n          if (!self.hasHeader(i)) {\n            self.setHeader(i, src.headers[i])\n          }\n        }\n      }\n      if (self._json && !self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json')\n      }\n      if (src.method && !self.explicitMethod) {\n        self.method = src.method\n      }\n    }\n\n  // self.on('pipe', function () {\n  //   console.error('You have already piped to this stream. Pipeing twice is likely to break the request.')\n  // })\n  })\n\n  defer(function () {\n    if (self._aborted) {\n      return\n    }\n\n    var end = function () {\n      if (self._form) {\n        if (!self._auth.hasAuth) {\n          self._form.pipe(self)\n        } else if (self._auth.hasAuth && self._auth.sentAuth) {\n          self._form.pipe(self)\n        }\n      }\n      if (self._multipart && self._multipart.chunked) {\n        self._multipart.body.pipe(self)\n      }\n      if (self.body) {\n        if (isstream(self.body)) {\n          self.body.pipe(self)\n        } else {\n          setContentLength()\n          if (Array.isArray(self.body)) {\n            self.body.forEach(function (part) {\n              self.write(part)\n            })\n          } else {\n            self.write(self.body)\n          }\n          self.end()\n        }\n      } else if (self.requestBodyStream) {\n        console.warn('options.requestBodyStream is deprecated, please pass the request object to stream.pipe.')\n        self.requestBodyStream.pipe(self)\n      } else if (!self.src) {\n        if (self._auth.hasAuth && !self._auth.sentAuth) {\n          self.end()\n          return\n        }\n        if (self.method !== 'GET' && typeof self.method !== 'undefined') {\n          self.setHeader('content-length', 0)\n        }\n        self.end()\n      }\n    }\n\n    if (self._form && !self.hasHeader('content-length')) {\n      // Before ending the request, we had to compute the length of the whole form, asyncly\n      self.setHeader(self._form.getHeaders(), true)\n      self._form.getLength(function (err, length) {\n        if (!err && !isNaN(length)) {\n          self.setHeader('content-length', length)\n        }\n        end()\n      })\n    } else {\n      end()\n    }\n\n    self.ntick = true\n  })\n}\n\nRequest.prototype.getNewAgent = function () {\n  var self = this\n  var Agent = self.agentClass\n  var options = {}\n  if (self.agentOptions) {\n    for (var i in self.agentOptions) {\n      options[i] = self.agentOptions[i]\n    }\n  }\n  if (self.ca) {\n    options.ca = self.ca\n  }\n  if (self.ciphers) {\n    options.ciphers = self.ciphers\n  }\n  if (self.secureProtocol) {\n    options.secureProtocol = self.secureProtocol\n  }\n  if (self.secureOptions) {\n    options.secureOptions = self.secureOptions\n  }\n  if (typeof self.rejectUnauthorized !== 'undefined') {\n    options.rejectUnauthorized = self.rejectUnauthorized\n  }\n\n  if (self.cert && self.key) {\n    options.key = self.key\n    options.cert = self.cert\n  }\n\n  if (self.pfx) {\n    options.pfx = self.pfx\n  }\n\n  if (self.passphrase) {\n    options.passphrase = self.passphrase\n  }\n\n  var poolKey = ''\n\n  // different types of agents are in different pools\n  if (Agent !== self.httpModule.Agent) {\n    poolKey += Agent.name\n  }\n\n  // ca option is only relevant if proxy or destination are https\n  var proxy = self.proxy\n  if (typeof proxy === 'string') {\n    proxy = url.parse(proxy)\n  }\n  var isHttps = (proxy && proxy.protocol === 'https:') || this.uri.protocol === 'https:'\n\n  if (isHttps) {\n    if (options.ca) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.ca\n    }\n\n    if (typeof options.rejectUnauthorized !== 'undefined') {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.rejectUnauthorized\n    }\n\n    if (options.cert) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.cert.toString('ascii') + options.key.toString('ascii')\n    }\n\n    if (options.pfx) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.pfx.toString('ascii')\n    }\n\n    if (options.ciphers) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.ciphers\n    }\n\n    if (options.secureProtocol) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.secureProtocol\n    }\n\n    if (options.secureOptions) {\n      if (poolKey) {\n        poolKey += ':'\n      }\n      poolKey += options.secureOptions\n    }\n  }\n\n  if (self.pool === globalPool && !poolKey && Object.keys(options).length === 0 && self.httpModule.globalAgent) {\n    // not doing anything special.  Use the globalAgent\n    return self.httpModule.globalAgent\n  }\n\n  // we're using a stored agent.  Make sure it's protocol-specific\n  poolKey = self.uri.protocol + poolKey\n\n  // generate a new agent for this setting if none yet exists\n  if (!self.pool[poolKey]) {\n    self.pool[poolKey] = new Agent(options)\n    // properly set maxSockets on new agents\n    if (self.pool.maxSockets) {\n      self.pool[poolKey].maxSockets = self.pool.maxSockets\n    }\n  }\n\n  return self.pool[poolKey]\n}\n\nRequest.prototype.start = function () {\n  // start() is called once we are ready to send the outgoing HTTP request.\n  // this is usually called on the first write(), end() or on nextTick()\n  var self = this\n\n  if (self.timing) {\n    // All timings will be relative to this request's startTime.  In order to do this,\n    // we need to capture the wall-clock start time (via Date), immediately followed\n    // by the high-resolution timer (via now()).  While these two won't be set\n    // at the _exact_ same time, they should be close enough to be able to calculate\n    // high-resolution, monotonically non-decreasing timestamps relative to startTime.\n    var startTime = new Date().getTime()\n    var startTimeNow = now()\n  }\n\n  if (self._aborted) {\n    return\n  }\n\n  self._started = true\n  self.method = self.method || 'GET'\n  self.href = self.uri.href\n\n  if (self.src && self.src.stat && self.src.stat.size && !self.hasHeader('content-length')) {\n    self.setHeader('content-length', self.src.stat.size)\n  }\n  if (self._aws) {\n    self.aws(self._aws, true)\n  }\n\n  // We have a method named auth, which is completely different from the http.request\n  // auth option.  If we don't remove it, we're gonna have a bad time.\n  var reqOptions = copy(self)\n  delete reqOptions.auth\n\n  debug('make request', self.uri.href)\n\n  // node v6.8.0 now supports a `timeout` value in `http.request()`, but we\n  // should delete it for now since we handle timeouts manually for better\n  // consistency with node versions before v6.8.0\n  delete reqOptions.timeout\n\n  try {\n    self.req = self.httpModule.request(reqOptions)\n  } catch (err) {\n    self.emit('error', err)\n    return\n  }\n\n  if (self.timing) {\n    self.startTime = startTime\n    self.startTimeNow = startTimeNow\n\n    // Timing values will all be relative to startTime (by comparing to startTimeNow\n    // so we have an accurate clock)\n    self.timings = {}\n  }\n\n  var timeout\n  if (self.timeout && !self.timeoutTimer) {\n    if (self.timeout < 0) {\n      timeout = 0\n    } else if (typeof self.timeout === 'number' && isFinite(self.timeout)) {\n      timeout = self.timeout\n    }\n  }\n\n  self.req.on('response', self.onRequestResponse.bind(self))\n  self.req.on('error', self.onRequestError.bind(self))\n  self.req.on('drain', function () {\n    self.emit('drain')\n  })\n\n  self.req.on('socket', function (socket) {\n    // `._connecting` was the old property which was made public in node v6.1.0\n    var isConnecting = socket._connecting || socket.connecting\n    if (self.timing) {\n      self.timings.socket = now() - self.startTimeNow\n\n      if (isConnecting) {\n        var onLookupTiming = function () {\n          self.timings.lookup = now() - self.startTimeNow\n        }\n\n        var onConnectTiming = function () {\n          self.timings.connect = now() - self.startTimeNow\n        }\n\n        socket.once('lookup', onLookupTiming)\n        socket.once('connect', onConnectTiming)\n\n        // clean up timing event listeners if needed on error\n        self.req.once('error', function () {\n          socket.removeListener('lookup', onLookupTiming)\n          socket.removeListener('connect', onConnectTiming)\n        })\n      }\n    }\n\n    var setReqTimeout = function () {\n      // This timeout sets the amount of time to wait *between* bytes sent\n      // from the server once connected.\n      //\n      // In particular, it's useful for erroring if the server fails to send\n      // data halfway through streaming a response.\n      self.req.setTimeout(timeout, function () {\n        if (self.req) {\n          self.abort()\n          var e = new Error('ESOCKETTIMEDOUT')\n          e.code = 'ESOCKETTIMEDOUT'\n          e.connect = false\n          self.emit('error', e)\n        }\n      })\n    }\n    if (timeout !== undefined) {\n      // Only start the connection timer if we're actually connecting a new\n      // socket, otherwise if we're already connected (because this is a\n      // keep-alive connection) do not bother. This is important since we won't\n      // get a 'connect' event for an already connected socket.\n      if (isConnecting) {\n        var onReqSockConnect = function () {\n          socket.removeListener('connect', onReqSockConnect)\n          self.clearTimeout()\n          setReqTimeout()\n        }\n\n        socket.on('connect', onReqSockConnect)\n\n        self.req.on('error', function (err) { // eslint-disable-line handle-callback-err\n          socket.removeListener('connect', onReqSockConnect)\n        })\n\n        // Set a timeout in memory - this block will throw if the server takes more\n        // than `timeout` to write the HTTP status and headers (corresponding to\n        // the on('response') event on the client). NB: this measures wall-clock\n        // time, not the time between bytes sent by the server.\n        self.timeoutTimer = setTimeout(function () {\n          socket.removeListener('connect', onReqSockConnect)\n          self.abort()\n          var e = new Error('ETIMEDOUT')\n          e.code = 'ETIMEDOUT'\n          e.connect = true\n          self.emit('error', e)\n        }, timeout)\n      } else {\n        // We're already connected\n        setReqTimeout()\n      }\n    }\n    self.emit('socket', socket)\n  })\n\n  self.emit('request', self.req)\n}\n\nRequest.prototype.onRequestError = function (error) {\n  var self = this\n  if (self._aborted) {\n    return\n  }\n  if (self.req && self.req._reusedSocket && error.code === 'ECONNRESET' &&\n    self.agent.addRequestNoreuse) {\n    self.agent = { addRequest: self.agent.addRequestNoreuse.bind(self.agent) }\n    self.start()\n    self.req.end()\n    return\n  }\n  self.clearTimeout()\n  self.emit('error', error)\n}\n\nRequest.prototype.onRequestResponse = function (response) {\n  var self = this\n\n  if (self.timing) {\n    self.timings.response = now() - self.startTimeNow\n  }\n\n  debug('onRequestResponse', self.uri.href, response.statusCode, response.headers)\n  response.on('end', function () {\n    if (self.timing) {\n      self.timings.end = now() - self.startTimeNow\n      response.timingStart = self.startTime\n\n      // fill in the blanks for any periods that didn't trigger, such as\n      // no lookup or connect due to keep alive\n      if (!self.timings.socket) {\n        self.timings.socket = 0\n      }\n      if (!self.timings.lookup) {\n        self.timings.lookup = self.timings.socket\n      }\n      if (!self.timings.connect) {\n        self.timings.connect = self.timings.lookup\n      }\n      if (!self.timings.response) {\n        self.timings.response = self.timings.connect\n      }\n\n      debug('elapsed time', self.timings.end)\n\n      // elapsedTime includes all redirects\n      self.elapsedTime += Math.round(self.timings.end)\n\n      // NOTE: elapsedTime is deprecated in favor of .timings\n      response.elapsedTime = self.elapsedTime\n\n      // timings is just for the final fetch\n      response.timings = self.timings\n\n      // pre-calculate phase timings as well\n      response.timingPhases = {\n        wait: self.timings.socket,\n        dns: self.timings.lookup - self.timings.socket,\n        tcp: self.timings.connect - self.timings.lookup,\n        firstByte: self.timings.response - self.timings.connect,\n        download: self.timings.end - self.timings.response,\n        total: self.timings.end\n      }\n    }\n    debug('response end', self.uri.href, response.statusCode, response.headers)\n  })\n\n  if (self._aborted) {\n    debug('aborted', self.uri.href)\n    response.resume()\n    return\n  }\n\n  self.response = response\n  response.request = self\n  response.toJSON = responseToJSON\n\n  // XXX This is different on 0.10, because SSL is strict by default\n  if (self.httpModule === https &&\n    self.strictSSL && (!response.hasOwnProperty('socket') ||\n    !response.socket.authorized)) {\n    debug('strict ssl error', self.uri.href)\n    var sslErr = response.hasOwnProperty('socket') ? response.socket.authorizationError : self.uri.href + ' does not support SSL'\n    self.emit('error', new Error('SSL Error: ' + sslErr))\n    return\n  }\n\n  // Save the original host before any redirect (if it changes, we need to\n  // remove any authorization headers).  Also remember the case of the header\n  // name because lots of broken servers expect Host instead of host and we\n  // want the caller to be able to specify this.\n  self.originalHost = self.getHeader('host')\n  if (!self.originalHostHeaderName) {\n    self.originalHostHeaderName = self.hasHeader('host')\n  }\n  if (self.setHost) {\n    self.removeHeader('host')\n  }\n  self.clearTimeout()\n\n  var targetCookieJar = (self._jar && self._jar.setCookie) ? self._jar : globalCookieJar\n  var addCookie = function (cookie) {\n    // set the cookie if it's domain in the href's domain.\n    try {\n      targetCookieJar.setCookie(cookie, self.uri.href, {ignoreError: true})\n    } catch (e) {\n      self.emit('error', e)\n    }\n  }\n\n  response.caseless = caseless(response.headers)\n\n  if (response.caseless.has('set-cookie') && (!self._disableCookies)) {\n    var headerName = response.caseless.has('set-cookie')\n    if (Array.isArray(response.headers[headerName])) {\n      response.headers[headerName].forEach(addCookie)\n    } else {\n      addCookie(response.headers[headerName])\n    }\n  }\n\n  self._redirect.onResponse(response, function (err, followingRedirect) {\n    if (!err && followingRedirect) return // Ignore the rest of the response\n    if (err) self.emit('error', err)\n\n    // Be a good stream and emit end when the response is finished.\n    // Hack to emit end on close because of a core bug that never fires end\n    response.on('close', function () {\n      if (!self._ended) {\n        self._ended = true\n        self.response.emit('end')\n      }\n    })\n\n    response.once('end', function () {\n      self._ended = true\n    })\n\n    var noBody = function (code) {\n      return (\n        self.method === 'HEAD' ||\n        // Informational\n        (code >= 100 && code < 200) ||\n        // No Content\n        code === 204 ||\n        // Not Modified\n        code === 304\n      )\n    }\n\n    var responseContent\n    if (self.gzip && !noBody(response.statusCode)) {\n      var contentEncoding = response.headers['content-encoding'] || 'identity'\n      contentEncoding = contentEncoding.trim().toLowerCase()\n\n      // Be more lenient with decoding compressed responses, since (very rarely)\n      // servers send slightly invalid gzip responses that are still accepted\n      // by common browsers.\n      // Always using Z_SYNC_FLUSH is what cURL does.\n      var zlibOptions = {\n        flush: zlib.Z_SYNC_FLUSH,\n        finishFlush: zlib.Z_SYNC_FLUSH\n      }\n\n      if (contentEncoding === 'gzip') {\n        responseContent = zlib.createGunzip(zlibOptions)\n        response.pipe(responseContent)\n      } else if (contentEncoding === 'deflate') {\n        responseContent = zlib.createInflate(zlibOptions)\n        response.pipe(responseContent)\n      } else {\n        // Since previous versions didn't check for Content-Encoding header,\n        // ignore any invalid values to preserve backwards-compatibility\n        if (contentEncoding !== 'identity') {\n          debug('ignoring unrecognized Content-Encoding ' + contentEncoding)\n        }\n        responseContent = response\n      }\n    } else {\n      responseContent = response\n    }\n\n    if (self.encoding) {\n      if (self.dests.length !== 0) {\n        console.error('Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.')\n      } else {\n        responseContent.setEncoding(self.encoding)\n      }\n    }\n\n    if (self._paused) {\n      responseContent.pause()\n    }\n\n    self.responseContent = responseContent\n\n    self.emit('response', response)\n\n    self.dests.forEach(function (dest) {\n      self.pipeDest(dest)\n    })\n\n    responseContent.on('data', function (chunk) {\n      if (self.timing && !self.responseStarted) {\n        self.responseStartTime = (new Date()).getTime()\n\n        // NOTE: responseStartTime is deprecated in favor of .timings\n        response.responseStartTime = self.responseStartTime\n      }\n      self._destdata = true\n      self.emit('data', chunk)\n    })\n    responseContent.once('end', function (chunk) {\n      self.emit('end', chunk)\n    })\n    responseContent.on('error', function (error) {\n      if (error.code === 'ECONNRESET' && error.message === 'aborted' && self.listenerCount('error') === 0) {\n        // Node 16 causes aborts to emit errors if there is an error listener.\n        // Without this short-circuit, it will cause unhandled exceptions since\n        // there is not always an `error` listener on `self`, but there will\n        // always be an `error` listener on `responseContent`.\n        // @see https://github.com/nodejs/node/pull/33172\n        return\n      }\n      self.emit('error', error)\n    })\n    responseContent.on('close', function () { self.emit('close') })\n\n    if (self.callback) {\n      self.readResponseBody(response)\n    } else { // if no callback\n      self.on('end', function () {\n        if (self._aborted) {\n          debug('aborted', self.uri.href)\n          return\n        }\n        self.emit('complete', response)\n      })\n    }\n    debug('finish init function', self.uri.href)\n  })\n}\n\nRequest.prototype.readResponseBody = function (response) {\n  var self = this\n  debug(\"reading response's body\")\n  var buffers = []\n  var bufferLength = 0\n  var strings = []\n\n  self.on('data', function (chunk) {\n    if (!Buffer.isBuffer(chunk)) {\n      strings.push(chunk)\n    } else if (chunk.length) {\n      bufferLength += chunk.length\n      buffers.push(chunk)\n    }\n  })\n  self.on('end', function () {\n    debug('end event', self.uri.href)\n    if (self._aborted) {\n      debug('aborted', self.uri.href)\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = []\n      bufferLength = 0\n      return\n    }\n\n    if (bufferLength) {\n      debug('has body', self.uri.href, bufferLength)\n      response.body = Buffer.concat(buffers, bufferLength)\n      if (self.encoding !== null) {\n        response.body = response.body.toString(self.encoding)\n      }\n      // `buffer` is defined in the parent scope and used in a closure it exists for the life of the Request.\n      // This can lead to leaky behavior if the user retains a reference to the request object.\n      buffers = []\n      bufferLength = 0\n    } else if (strings.length) {\n      // The UTF8 BOM [0xEF,0xBB,0xBF] is converted to [0xFE,0xFF] in the JS UTC16/UCS2 representation.\n      // Strip this value out when the encoding is set to 'utf8', as upstream consumers won't expect it and it breaks JSON.parse().\n      if (self.encoding === 'utf8' && strings[0].length > 0 && strings[0][0] === '\\uFEFF') {\n        strings[0] = strings[0].substring(1)\n      }\n      response.body = strings.join('')\n    }\n\n    if (self._json) {\n      try {\n        response.body = JSON.parse(response.body, self._jsonReviver)\n      } catch (e) {\n        debug('invalid JSON received', self.uri.href)\n      }\n    }\n    debug('emitting complete', self.uri.href)\n    if (typeof response.body === 'undefined' && !self._json) {\n      response.body = self.encoding === null ? Buffer.alloc(0) : ''\n    }\n    self.emit('complete', response, response.body)\n  })\n}\n\nRequest.prototype.abort = function () {\n  var self = this\n  self._aborted = true\n\n  if (self.req) {\n    self.req.abort()\n  } else if (self.response) {\n    self.response.destroy()\n  }\n\n  self.clearTimeout()\n  self.emit('abort')\n}\n\nRequest.prototype.pipeDest = function (dest) {\n  var self = this\n  var response = self.response\n  // Called after the response is received\n  if (dest.headers && !dest.headersSent) {\n    if (response.caseless.has('content-type')) {\n      var ctname = response.caseless.has('content-type')\n      if (dest.setHeader) {\n        dest.setHeader(ctname, response.headers[ctname])\n      } else {\n        dest.headers[ctname] = response.headers[ctname]\n      }\n    }\n\n    if (response.caseless.has('content-length')) {\n      var clname = response.caseless.has('content-length')\n      if (dest.setHeader) {\n        dest.setHeader(clname, response.headers[clname])\n      } else {\n        dest.headers[clname] = response.headers[clname]\n      }\n    }\n  }\n  if (dest.setHeader && !dest.headersSent) {\n    for (var i in response.headers) {\n      // If the response content is being decoded, the Content-Encoding header\n      // of the response doesn't represent the piped content, so don't pass it.\n      if (!self.gzip || i !== 'content-encoding') {\n        dest.setHeader(i, response.headers[i])\n      }\n    }\n    dest.statusCode = response.statusCode\n  }\n  if (self.pipefilter) {\n    self.pipefilter(response, dest)\n  }\n}\n\nRequest.prototype.qs = function (q, clobber) {\n  var self = this\n  var base\n  if (!clobber && self.uri.query) {\n    base = self._qs.parse(self.uri.query)\n  } else {\n    base = {}\n  }\n\n  for (var i in q) {\n    base[i] = q[i]\n  }\n\n  var qs = self._qs.stringify(base)\n\n  if (qs === '') {\n    return self\n  }\n\n  self.uri = url.parse(self.uri.href.split('?')[0] + '?' + qs)\n  self.url = self.uri\n  self.path = self.uri.path\n\n  if (self.uri.host === 'unix') {\n    self.enableUnixSocket()\n  }\n\n  return self\n}\nRequest.prototype.form = function (form) {\n  var self = this\n  if (form) {\n    if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n      self.setHeader('content-type', 'application/x-www-form-urlencoded')\n    }\n    self.body = (typeof form === 'string')\n      ? self._qs.rfc3986(form.toString('utf8'))\n      : self._qs.stringify(form).toString('utf8')\n    return self\n  }\n  // create form-data object\n  self._form = new FormData()\n  self._form.on('error', function (err) {\n    err.message = 'form-data: ' + err.message\n    self.emit('error', err)\n    self.abort()\n  })\n  return self._form\n}\nRequest.prototype.multipart = function (multipart) {\n  var self = this\n\n  self._multipart.onRequest(multipart)\n\n  if (!self._multipart.chunked) {\n    self.body = self._multipart.body\n  }\n\n  return self\n}\nRequest.prototype.json = function (val) {\n  var self = this\n\n  if (!self.hasHeader('accept')) {\n    self.setHeader('accept', 'application/json')\n  }\n\n  if (typeof self.jsonReplacer === 'function') {\n    self._jsonReplacer = self.jsonReplacer\n  }\n\n  self._json = true\n  if (typeof val === 'boolean') {\n    if (self.body !== undefined) {\n      if (!/^application\\/x-www-form-urlencoded\\b/.test(self.getHeader('content-type'))) {\n        self.body = safeStringify(self.body, self._jsonReplacer)\n      } else {\n        self.body = self._qs.rfc3986(self.body)\n      }\n      if (!self.hasHeader('content-type')) {\n        self.setHeader('content-type', 'application/json')\n      }\n    }\n  } else {\n    self.body = safeStringify(val, self._jsonReplacer)\n    if (!self.hasHeader('content-type')) {\n      self.setHeader('content-type', 'application/json')\n    }\n  }\n\n  if (typeof self.jsonReviver === 'function') {\n    self._jsonReviver = self.jsonReviver\n  }\n\n  return self\n}\nRequest.prototype.getHeader = function (name, headers) {\n  var self = this\n  var result, re, match\n  if (!headers) {\n    headers = self.headers\n  }\n  Object.keys(headers).forEach(function (key) {\n    if (key.length !== name.length) {\n      return\n    }\n    re = new RegExp(name, 'i')\n    match = key.match(re)\n    if (match) {\n      result = headers[key]\n    }\n  })\n  return result\n}\nRequest.prototype.enableUnixSocket = function () {\n  // Get the socket & request paths from the URL\n  var unixParts = this.uri.path.split(':')\n  var host = unixParts[0]\n  var path = unixParts[1]\n  // Apply unix properties to request\n  this.socketPath = host\n  this.uri.pathname = path\n  this.uri.path = path\n  this.uri.host = host\n  this.uri.hostname = host\n  this.uri.isUnix = true\n}\n\nRequest.prototype.auth = function (user, pass, sendImmediately, bearer) {\n  var self = this\n\n  self._auth.onRequest(user, pass, sendImmediately, bearer)\n\n  return self\n}\nRequest.prototype.aws = function (opts, now) {\n  var self = this\n\n  if (!now) {\n    self._aws = opts\n    return self\n  }\n\n  if (opts.sign_version === 4 || opts.sign_version === '4') {\n    // use aws4\n    var options = {\n      host: self.uri.host,\n      path: self.uri.path,\n      method: self.method,\n      headers: self.headers,\n      body: self.body\n    }\n    if (opts.service) {\n      options.service = opts.service\n    }\n    var signRes = aws4.sign(options, {\n      accessKeyId: opts.key,\n      secretAccessKey: opts.secret,\n      sessionToken: opts.session\n    })\n    self.setHeader('authorization', signRes.headers.Authorization)\n    self.setHeader('x-amz-date', signRes.headers['X-Amz-Date'])\n    if (signRes.headers['X-Amz-Security-Token']) {\n      self.setHeader('x-amz-security-token', signRes.headers['X-Amz-Security-Token'])\n    }\n  } else {\n    // default: use aws-sign2\n    var date = new Date()\n    self.setHeader('date', date.toUTCString())\n    var auth = {\n      key: opts.key,\n      secret: opts.secret,\n      verb: self.method.toUpperCase(),\n      date: date,\n      contentType: self.getHeader('content-type') || '',\n      md5: self.getHeader('content-md5') || '',\n      amazonHeaders: aws2.canonicalizeHeaders(self.headers)\n    }\n    var path = self.uri.path\n    if (opts.bucket && path) {\n      auth.resource = '/' + opts.bucket + path\n    } else if (opts.bucket && !path) {\n      auth.resource = '/' + opts.bucket\n    } else if (!opts.bucket && path) {\n      auth.resource = path\n    } else if (!opts.bucket && !path) {\n      auth.resource = '/'\n    }\n    auth.resource = aws2.canonicalizeResource(auth.resource)\n    self.setHeader('authorization', aws2.authorization(auth))\n  }\n\n  return self\n}\nRequest.prototype.httpSignature = function (opts) {\n  var self = this\n  httpSignature.signRequest({\n    getHeader: function (header) {\n      return self.getHeader(header, self.headers)\n    },\n    setHeader: function (header, value) {\n      self.setHeader(header, value)\n    },\n    method: self.method,\n    path: self.path\n  }, opts)\n  debug('httpSignature authorization', self.getHeader('authorization'))\n\n  return self\n}\nRequest.prototype.hawk = function (opts) {\n  var self = this\n  self.setHeader('Authorization', hawk.header(self.uri, self.method, opts))\n}\n\nRequest.prototype.jar = function (jar) {\n  var self = this\n  var cookies\n\n  if (self._redirect.redirectsFollowed === 0) {\n    self.originalCookieHeader = self.getHeader('cookie')\n  }\n\n  if (!jar) {\n    // disable cookies\n    cookies = false\n    self._disableCookies = true\n  } else {\n    var targetCookieJar = jar.getCookieString ? jar : globalCookieJar\n    var urihref = self.uri.href\n    // fetch cookie in the Specified host\n    if (targetCookieJar) {\n      cookies = targetCookieJar.getCookieString(urihref)\n    }\n  }\n\n  // if need cookie and cookie is not empty\n  if (cookies && cookies.length) {\n    if (self.originalCookieHeader) {\n      // Don't overwrite existing Cookie header\n      self.setHeader('cookie', self.originalCookieHeader + '; ' + cookies)\n    } else {\n      self.setHeader('cookie', cookies)\n    }\n  }\n  self._jar = jar\n  return self\n}\n\n// Stream API\nRequest.prototype.pipe = function (dest, opts) {\n  var self = this\n\n  if (self.response) {\n    if (self._destdata) {\n      self.emit('error', new Error('You cannot pipe after data has been emitted from the response.'))\n    } else if (self._ended) {\n      self.emit('error', new Error('You cannot pipe after the response has been ended.'))\n    } else {\n      stream.Stream.prototype.pipe.call(self, dest, opts)\n      self.pipeDest(dest)\n      return dest\n    }\n  } else {\n    self.dests.push(dest)\n    stream.Stream.prototype.pipe.call(self, dest, opts)\n    return dest\n  }\n}\nRequest.prototype.write = function () {\n  var self = this\n  if (self._aborted) { return }\n\n  if (!self._started) {\n    self.start()\n  }\n  if (self.req) {\n    return self.req.write.apply(self.req, arguments)\n  }\n}\nRequest.prototype.end = function (chunk) {\n  var self = this\n  if (self._aborted) { return }\n\n  if (chunk) {\n    self.write(chunk)\n  }\n  if (!self._started) {\n    self.start()\n  }\n  if (self.req) {\n    self.req.end()\n  }\n}\nRequest.prototype.pause = function () {\n  var self = this\n  if (!self.responseContent) {\n    self._paused = true\n  } else {\n    self.responseContent.pause.apply(self.responseContent, arguments)\n  }\n}\nRequest.prototype.resume = function () {\n  var self = this\n  if (!self.responseContent) {\n    self._paused = false\n  } else {\n    self.responseContent.resume.apply(self.responseContent, arguments)\n  }\n}\nRequest.prototype.destroy = function () {\n  var self = this\n  this.clearTimeout()\n  if (!self._ended) {\n    self.end()\n  } else if (self.response) {\n    self.response.destroy()\n  }\n}\n\nRequest.prototype.clearTimeout = function () {\n  if (this.timeoutTimer) {\n    clearTimeout(this.timeoutTimer)\n    this.timeoutTimer = null\n  }\n}\n\nRequest.defaultProxyHeaderWhiteList =\n  Tunnel.defaultProxyHeaderWhiteList.slice()\n\nRequest.defaultProxyHeaderExclusiveList =\n  Tunnel.defaultProxyHeaderExclusiveList.slice()\n\n// Exports\n\nRequest.prototype.toJSON = requestToJSON\nmodule.exports = Request\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}